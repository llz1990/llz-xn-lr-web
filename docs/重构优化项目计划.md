# 前端重构优化项目计划

## 项目背景

    链融前端项目随着业务需求的增加、变更，逐渐暴露出结构混乱、组件复用率低、不易于扩展、代码冗余等问题。

### 优化目的

1. 模块化。按业务角色分模块，让项目文件结构清晰；
2. 抽象业务主流程，精简开发步骤；
3. 通用组件仅包含交互逻辑，移除业务逻辑，增加组件的复用率；
4. 调整组件使用方式，避免修改现有组件的方式来实现新需要求，而是以扩展的形式来满足新需求；
    
## 主要任务

1. 了解项目运行环境，确定新项目组件库 【**1d**】；
2. 梳理现有业务，并且文档化，以便加深业务理解【**3d**】；
3. 整理当前项目所有表单组件，便于整合、优化为通用组件【**3d**】；
4. 初始化项目【**1d**】:
    1. 添加基本组件库；
    2. 设置 js, css lint 规则；
    3. 前台、后台 layout 组件及路由设置；
5. 通用组件【**23d**】：
    1. 根据 步骤 3 中整理的表单组件进行整合、汇总，然后逐一重写【**14d+**】；
    2. 重新实现可配置化的 ReactiveForms，新增、编辑及查看模式【**5d**】；
    3. 文件查看组件（图片、pdf）【**1d**】；
    4. 文件上传【**1d**】； 
    5. CA 签章（合同）组件【**2d**】；
6. 通用工具服务【**12d**】：
    1. http 请求（增、删、改、查、上传、下载）,单元测试【**2d**】；
    2. 图片压缩【**1d**】；
    3. md5 去重【**2d**】；
    4. 认证授权【**2d**】；
    5. 埋点【**5d**】
7. 前台页面迁移【**3d**】：
    1. 首页【**1d**】；
    2. 新闻与通知、平台守则、业务指引、帮助中心、关于我们【**2d**】；
8. 登录【**1d**】：
    1. 首页登录（modal 形式）；
    2. 注册登录；
9.  注册【**2d**】；
10. 角色（平台管理员、供应商、核心企业、保理商）菜单设置与控制【**2d**】；
    
|  	|    平台管理员  	|    供应商  	|    核心企业  	|    保理商  	|
|:------------:	|:------------------------------------------------------------------------------------------------------------------------------------------------:	|:-------------------------------------------------------------------------------------------------------------------:	|:---------------------------------------------------------------------------------------------------------------------------------------------------:	|:----------------------------------------------------------------------------------------------------------------:	|
|    首页  	| 待办消息 	| 待办消息 	| 待办消息 	| 待办消息 	|
|    我的交易  	| - 	|    两票一合同            基础模式，      保证付款 + 商品融资，      定向收款保理，      标准保理，      所有交易 ， 	|    两票一合同          出票登记，          委托模式，          基础模式，          回购模式 ，      标准保理          付款计划登记，      所有交易  	|    标准保理      所有交易，      收款登录，      待补发票        	|
|    万科abs  	| - 	| - 	| - 	|    上传付款计划      付款管理，      生成收账款回执，      资产池，      所有交易  	|
|    管理功能  	|    审核机构创建      用户管理，      门户管理，      白名单管理，      发票验证管理，      模式修改  	|    用户管理  	|    用户管理  	|    用户管理      角色权限        	|
|    我的数据  	|    所有出票      主流程详情报表，      注册公司，      商票展示，      企业上报交易数据，      区块链数据，      深圳CA审核进度，      发票展示  	| - 	|    客户计划  	|    融资详情      客户地图，      资产结构，      资金回笼，      客户计划，      商票展示，      发票展示        	|
|    我的资料  	| - 	|    企业资料      周报资料，      发票管理，      银行账号管理  	|    企业资料，      周报资料，      发票管理，      银行账号管理  	|    企业资料，      周报资料，      发票管理，      银行账号管理  	|
|    我的公司  	| - 	| - 	| - 	|    风险资产变动情况，      公司经营状况  	|
|    我的客户  	| - 	| - 	| - 	|    额度管理，      两票一合同利率，      标准保理利率，      审批条件        	|
|    银行台号  	| - 	| - 	| - 	|    转账流水，      商票接收        	|
|    数据导出  	| - 	| - 	| - 	|    数据导出，      word下载        	|
|    我的工具  	|    利息计算器，      智能风控，      企业信用公示，      查询失信企业，      查询发票状态  	|    利息计算器，       智能风控，       企业信用公示，       查询失信企业，       查询发票状态  	|    利息计算器，       智能风控，       企业信用公示，       查询失信企业，       查询发票状态  	|    利息计算器，       智能风控，       企业信用公示，       查询失信企业，       查询发票状态  	|

11. 控制台首页【**3d**】：
    1. 所有待办任务【**2d**】： 
        1. 列表、分页【**0.5d**】；
        2. 查看页面【**1.5d**】；
    2. 系统消息【**1d**】：
        1. 列表、分页;
        2. 标记为已读；
12. 我的交易模块【**39d**】：
    1.  两票一合同【**3d**】：
        1.  基础模式：
            1.  列表、分页；
            2.  查看处理详情；
            3.  发起交易申请；
    2. 标准保理【**3d**】：
        1. 列表、分页；
        2. 查看处理详情；
        3. 发起交易申请；
    3. 保证付款 + 商品融资【**3d**】：
        1. 列表、分页；
        2. 查看处理详情；
        3. 发起交易申请；
    4. 定向收款保理（华为模式）【**3d**】：
        1. 列表、分页；
        2. 查看处理详情；
        3. 发起交易申请；
    5. 所有交易【**5d**】：
        1. 列表、分页；
        2. 查看详情；
            1. 查看子流程；
            2. 查看合同；
            3. 生成保理上报 XML；
            4. 下载附件；
    6. 两票一合同【**12d**】：
        1. 出票登记【**3d**】:
            1. 列表、分页；
            2. 查看处理详情；
            3. 发起交易申请；
        2. 委托模式【**3d**】：
            1. 列表、分页；
            2. 查看处理详情；
            3. 发起交易申请；
        3. 基础模式【**3d**】：
            1. 列表、分页；
            2. 查看处理详情；
            3. 发起交易申请；
        4. 回购模式【**3d**】：
            1. 列表、分页；
            2. 查看处理详情；
            3. 发起交易申请；
    7. 标准保理-金地【**3d**】：
        1. 列表、分页；
        2. 查看处理详情；
        3. 发起交易申请；
    8. 收款登记【**3d**】：
        1. 列表、分页；
        2. 查看处理详情；
        3. 发起收款登记；
    9. 待补发票【**2d**】：
        1.  列表、分页、日期范围查询；
        2. 查看处理详情；
    10. 保证付款服务费管理【**2d**】：
        1.  列表；
        2.  下载模板；
        3.  批量导入；
        4.  下载当前数据；
13. 我的工具模块【**1d**】：
    1.  利息计算器；
    2.  智能风控；
    3.  相关网站跳转：企业信用公示、查询失信企业、查询发票状态；
14. 万科abs【**17d**】:
    1.  上传付款计划【**5d**】：
        1.  列表、分页；
        2.  查看处理详情；
        3.  出让人信息表；
        4.  应收账款转让信息表；
        5.  发起交易申请；
    2. 付款管理【**4d**】：
        1. 未付款确认【**1d**】:
            1. 查询、分页、列表；
            2. 上传付款确认书；
            3. 中止操作；
            4. 查看交易详情；
        2. 未打印付款指令【**1d**】：
            1. 查询、分页、列表；
            2. 查看付款确认书；
            3. 中止操作；
            4. 查看交易详情；
        3. 已打印待放款【**1d**】：
            1. 查询、分页、列表；
            2. 查看付款确认书；
            3. 查看付款申请表；
            4. 上传汇款凭证；
            5. 中止操作；
            6. 查看交易详情；
        4. 已放款【**1d**】：
            1. 查询、分页、列表；
            2. 查看付款确认书；
            3. 查看付款申请表；
            4. 查看上传汇款凭证；
            5. 查看实际付款确认书；
            6. 查看交易详情；
    3. 生成应收账款回执【**2d**】：
        1. 列表、分页；
        2. 下载付款计划表模板；
        3. 历史数据；
        4. 全部下载；
        5. 上传 Excel;
    4. 资产池【**6d**】：
        1. 列表、分页；
        2. 下载 Excel;
        3. 添加；
        4. 查看
        5. 添加打包；
        6. 锁定；
15. 管理功能模块【**19d**】：
    1.  审核机构创建【**2d**】：
        1.  列表、分页；
        2.  查看处理；
    2.  用户管理【**2d**】：
        1.  列表；
        2.  增加用户；
        3.  修改用户；
        4.  是否接收短信；
    3.  门户管理【**5d**】：
        1.  分组显示；
        2.  编辑（内容）：
            1.  列表、分页；
            2.  增加；
            3.  修改；
            4.  删除；
        3. 仅登录可见；
        4. 菜单管理（new）【**2d**】
    4.  白名单管理【**2d**】：
        1.  列表、分页；
        2.  删除；
    5.  发票验证管理【**1d**】：
        1.  是否开启发票验证；
    6.  模式修改【**1d**】
    7.  角色权限【**3d**】
    8.  上传中登网文件【**1d**】
    9.  发票查询【**1d**】
    10. 数据导出【**1d**】
16. 银行台账模块【**3d**】：
    1.  转账流水；
    2.  商票接收；
17. 我的资料模块【**7d**】：
    1.  企业资料【**1d**】；
    2.  财报资料【**2d**】；
        1.  发起流程；
    3.  发票管理【**2d**】：
        1.  查询；
        2.  列表、分页；
        3.  新增、查看、编辑；
    4. 银行账号管理【**2d**】：
        1. 查询；
        2. 列表、分页；
        3. 新增、查看、编辑；
    5. ~~周报资料~~
18. 我的公司模块：
    1.  ~~风险资产变动情况~~
    2.  ~~公司经营状况~~
19. 我的客户模块【**8d**】：
    1.  额度管理【**2d**】：
        1.  列表、分页；
        2.  额度变更申请；
    2. 两票一合同利率【**2d**】：
        1. 列表、分页；
        2. 额度变更申请；
    3. 标准保理利率【**2d**】：
        1. 总部利率/城市公司利率/项目公司利率
            1. 列表、分页；
            2. 新增、编辑；
    4. 审批条件【**2d**】：
        1. 列表；
        2. 新增、编辑；
        3. 查看；
        4. 删除；
20. 我的数据模块【**22d**】：
    1.  融资详情【**5d**】：
        1.  列表、日期范围查询；
        2.  详情；
        3.  余额条形图；
        4.  单笔金额条形图；
        5.  平均期限条件图；
        6.  业务份额环形图；
        7.  收入贡献环形图；
    2. 客户地图【**2d**】：
        1. 客户地域分布图；
        2. 行业分布图；
    3. 资产结构【**2d**】：
        1. 期限结构饼图；
        2. 收益结构饼图；
        3. 再利用率二维面积图；
    4. 资金回笼【**3d**】：
        1. 资金回笼列表；
        2. 资金回笼统计图；
        3. 本月回款情况饼图；
        4. 总回款情况饼图；
    5. 客户计划【**0.5d**】：
        1. 列表、分页；
    6. 商票展示【**1d**】：
        1. 列表、分页；
        2. 查询；
        3. 查看；
        4. 质押；
    7. 发票展示【**2.5d**】：
        1. 列表、分页；
        2. 查看详情；
        3. 查看流程；
    8. 所有出票【**1d**】：
        1. 列表、分页；
        2. 查看审核详情；
    9. 主流程详情报表【**1d**】：
        1.  列表、分页；
        2.  查看；
    10. 注册公司【**2d**】：
        1.  列表、分页；
        2.  查看详情；
    11. 企业上报交易数据【**2d**】：
        1.  列表、分页；
        2.  查看详情；
    12. 区块链数据【**0.5d**】：
        1.  列表
    13. 深圳 CA 审核进度【**0.5d**】：
        1.  列表、分页；
21. 测试【**15d**】

## 工作量评估

| 任务 	| 工作量（人/天） 	|
|----------------------------------------------------------------	|-----------------	|
| 1.了解项目运行环境，确定新项目组件库 	| 1 	|
| 2. 梳理现有业务，并且文档化，以便加深业务理解； 	| 3 	|
| 3. 整理当前项目所有表单组件，便于整合、优化为通用组件； 	| 3 	|
| 4. 初始化项目 	| 1 	|
| 5. 通用组件 	| 23 	|
| 6. 通用工具服务 	| 6 	|
| 7.前台页面迁移 	| 3 	|
| 8. 登录 	| 1 	|
| 9. 注册 	| 2 	|
| 10. 角色（平台管理员、供应商、核心企业、保理商）菜单设置与控制 	| 2 	|
| 11. 控制台首页 	| 3 	|
| 12. 我的交易模块 	| 39 	|
| 13. 我的工具模块 	| 1 	|
| 14. 万科abs 	| 17 	|
| 15. 管理功能模块 	| 19 	|
| 16.银行台账模块 	| 3 	|
| 17.我的资料模块 	| 7 	|
| 18. 我的公司模块 	| 0 	|
| 19. 我的客户模块 	| 8 	|
| 20. 我的数据模块 	| 22 	|
| 21.测试 	| 15 	|
|  	| 178 	|
